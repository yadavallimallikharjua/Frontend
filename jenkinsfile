pipeline {
     agent {label 'jdk11-mvn3.8.5'}
     triggers{ cron('H * * * *') }
     stages {
         stage('scm') {
             steps {
               git branch: 'declarative', url: 'https://github.com/yadavallimallikharjua/spring-petclinic.git'
              }
           }
        stage('build') {
            steps {
                sh '''
            echo "PATH=${PATH}"
            echo "M2_HOME=${M2_HOME}"

                '''
              sh '/usr/local/apache-maven-3.8.5/bin/mvn clean package
            }    
          } 
         stage('publish test reports') {
             steps {
                junit '**/TEST-*.xml'
               }
           }
          stage('archive') {
              steps {
                 archiveArtifacts artifacts: 'target/*.jar'
              }
          }
      }
  }
